<script>

$(document).ready( function(root) {

  var Lib = root.Lib = (root.Lib || {});

  $("body")

    .on("ajax:success", "a.gen-modal", function(event, data) {
      var $modal = $("<div>").addClass("modal").append(data)

      $(".backdrop").show();
      $("header").before($modal);
    })

    .on("ajax:success", "form.modal-form", function(event, data) {
      Lib.afterCreation(event, data, false, true);
    })

    .on("ajax:success", "a.delete-link", function(event, data) {
      var $link = $(event.target);
      var $li = $link.parent();

      var message = "<h3><span><span> successfully!"

      Lib.notify(message, "green", $li.parent(), "append", true);

      var $ul = $li.parent();

      $li.remove();

      if ($ul.children('li').length == 0) {
        var $noNewNotifications = $('<li><a href="/">No new notifications</a></li>');

        $ul.append($noNewNotifications);
      }

    })
})


</script>