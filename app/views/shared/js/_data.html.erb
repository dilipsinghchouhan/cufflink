<script>
$(document).ready( function(root){
  var ProfileLib = root.ProfileLib = (root.ProfileLib || {});

  var populate = ProfileLib.populate = function(dataType) {

    var $bootstrappedData = $("#bootstrapped_" + dataType + "_data_json")

    if ($bootstrappedData.length == 0) return

    var dataArray = JSON.parse(
      $bootstrappedData.html());

    dataArray[dataType + "_list"].forEach(function(data) {
      ProfileLib.append(dataType, data);
    })
  }

  var append = ProfileLib.append = function(dataType,data) {
    var templateCode = $("#" + dataType + "_template").html();

    var templateFn = _.template(templateCode);

    var obj = {};
    obj[dataType] = data;

    var renderedContent = templateFn(obj);

    $("#" + dataType + "-list").append(renderedContent);
  }

  var dataTypes = ["education", "status"];

  dataTypes.forEach(function(dataType) {
    ProfileLib.populate(dataType);
  });
});
</script>