<script>
$(document).ready( function(root){
  var Lib = root.Lib = (root.Lib || {});

  $(".profile-box")

    .on("ajax:success", "a.gen-form", function(event, data) {
      var $html = data;
      var $link = $(event.target);

	  $(".profile-form").parent().remove();
	  $('a.gen-form').show();
	  $link.hide();
	  
      $link.siblings("h3").after($html);
    })

    .on("ajax:success", ".profile-form", function(event, data) {
      Lib.afterCreation(event, data);
    })

    .on("ajax:error", ".profile-form", function(event, data, error) {
      var error = data.responseText;
      var type = $(this).attr("id");

      Lib.notify(error, "red", $(this), "before");
    })

    .on("ajax:success", ".delete-education > form", function(event, data) {
      var $form = $(event.target);
      var $li = $form.closest("li");
      var type = $(this).attr("id");

      var message = data.school + " deleted successfully"

      $li.remove();
      Lib.notify(message, "green", Lib.getDest(type), "before", true);
    })

  $("form#status")

    .on("ajax:success", function(event, data) {
      Lib.afterCreation(event, data);
    })

});
</script>
