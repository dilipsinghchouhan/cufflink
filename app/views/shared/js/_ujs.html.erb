<script>
$(document).ready( function(root){
  var ProfileLib = root.ProfileLib = (root.ProfileLib || {});

  $(".profile-box")

    .on("ajax:success", "a.gen-form", function(event, data) {
      var $html = data;
      var $link = $(event.target);

      $link.hide();
      $("#profile-education > h3").after($html);
    })

    .on("ajax:success", ".profile-form", function(event, data) {
      ProfileLib.afterCreation(event, data);
    })

    .on("ajax:error", ".profile-form", function(event, data, error) {
      var error = data.responseText;
      var type = $(this).attr("id");

      ProfileLib.notify(error, "red", ProfileLib.getDest(type), "before");
    })

    .on("ajax:success", ".delete-education > form", function(event, data) {
      var $form = $(event.target);
      var $li = $form.closest("li");
      var type = $(this).attr("id");

      var message = data.school + " deleted successfully"

      $li.remove();
      ProfileLib.notify(message, "green", ProfileLib.getDest(type), "before",
        true);
    })

  $("form#status")

    .on("ajax:success", function(event, data) {
      ProfileLib.afterCreation(event, data);
    })

});
</script>
